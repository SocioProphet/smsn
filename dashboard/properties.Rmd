## Properties

Semantic Synchrony deals with *entities* connected by *relationships* and annotated with *properties*. There are only a handful of valid property keys, each with a different meaning or function.

### @weight property

```{r, echo=FALSE}
mean.weight <- mean(entities$weight)
sd.weight <- sd(entities$weight)
```

SmSn's `@weight` property ranges from 0 to 1 and is used to convey importance or emphasis; entities with higher weight are displayed more prominently in the user interface, and rank higher in search results. 
In this graph, the mean weight of entities is **`r num(mean.weight)`** (&sigma;=`r num(sd.weight)`).
The distribution of entity weights is show below.

```{r, echo=FALSE}
showFreqTable(entities$weight)
```

#### Invalid weights

```{r, echo=FALSE}
invalid.weight.entities <- subset(entities,
  weight == 0 | weight > 1.0 | (weight*4)%%1 != 0)
```

Every `@weight` property should have a value of 0.25, 0.5, 0.75, or 1.0; any other weight is invalid, including 0.0.
This graph has **`r num(nrow(invalid.weight.entities))` invalid weight value(s)**.

### @title property

```{r, echo=FALSE}
titles <- as.character(entities$title)
title.length <- as.vector(sapply(titles, nchar))
```

SmSn's `@title` property provides a label for each entity in the graph; entities are seen and understood on the basis of their titles.

#### Empty titles

```{r, echo=FALSE}
total.empty.titles <- length(title.length[title.length == 0])
rel.empty.titles <- total.empty.titles / total.entities

nonempty.titles <- titles[title.length > 0]
nonempty.title.length <- title.length[title.length > 0]
```

While entities without titles are valid in some contexts, they are invalid in others; in the user interface, an entity without a title is not useful.
The current graph contains `r num(total.empty.titles)` entities `r perc.of.entities(total.empty.titles)` without titles.

#### Duplicate titles

```{r, echo=FALSE}
t.titles <- as.data.frame(table(nonempty.titles))

df <- t.titles[t.titles$Freq > 1,]
df <- df[with(df, order(-Freq)),]
dup.titles <- data.frame(title=df$nonempty.titles, count=df$Freq)

total.duplicate.titles <- nrow(dup.titles)
```

While duplicate titles (e.g. two entities, both with the title "Arthur Dent") are allowed, they are to be discouraged, as they are often a sign of unnecessary data duplication, or misalignment of data sources.
In the current graph, there are **`r num(total.duplicate.titles)` distinct duplicate titles**, as shown in the table below.

```{r, echo=FALSE}
showTable(dup.titles, list(searching=FALSE, pageLength=5))
```

#### Title length

```{r, echo=FALSE}
mean.title.length <- mean(nonempty.title.length)
sd.title.length <- sd(nonempty.title.length)
```

When titles are used to name things, shorter titles are better; they are easier to recognize and search on.
However, titles are also used to capture free-form text of any kind, so there is no hard limit to the length of a title.
The distribution of lengths for non-empty titles in the current graph is shown below.

```{r, echo=FALSE}
renderPlot({
  plot(density(title.length, from=0, to=200),
    main="title length distribution", xlab="length (characters)", ylab="kernel density")
  abline(col="blue", v=mean.title.length)
})
```

The **mean length** of a non-empty title is **`r num(mean.title.length)` characters** (&sigma;=`r num(sd.title.length)`), indicated with a <span style="color:blue">blue line</span> in the plot above.
A better metric is the **most likely length**, **xxx characters**, indicated with a <span style="color:red">red line</span> (TODO). This assumes a [log-normal](https://en.wikipedia.org/wiki/Log-normal_distribution) distribution of lengths.

```{r, echo=FALSE}
len <- nonempty.title.length
```

Alternative distributions with a resemblance to observed data include the [Poisson distribution](https://en.wikipedia.org/wiki/Poisson_distribution) and the [gamma distribution](https://en.wikipedia.org/wiki/Gamma_distribution), but neither has been found to fit as well as the log-normal distribution.

### @alias property

```{r, echo=FALSE}
aliases <- sapply(as.vector(entities$alias), as.character)
alias.lengths <- sapply(aliases, nchar)
alias.entities <- entities[alias.lengths > 0,]
total.alias.entities <- nrow(alias.entities)
```

The `@alias` property provides an external identity for an entity, such as a [URI](https://en.wikipedia.org/wiki/Uniform_Resource_Identifier). For example, the entity representing Saturn might given an alias of `https://en.wikipedia.org/wiki/Saturn`, linking it with the Wikipedia page for the planet Saturn.

In the current data set, there are **`r num(total.alias.entities)` entities** `r perc.of.entities(nrow(alias.entities))` with a non-empty alias.

### @priority property

```{r, echo=FALSE}
entities.with.priority <- subset(entities, priority > 0)
total.with.priority <- nrow(entities.with.priority)

df <- as.data.frame(table(entities$priority))
t.priority <- data.frame(priority=df$Var1, count=sapply(df$Freq, num))
```

The `@priority` property is used to associate a priority or urgency with an entity; entities with non-zero priority are displayed with an underline in the UI, and may appear higher in search results.

There are **`r num(total.with.priority)` entities** `r perc.of.entities(total.with.priority)` in the graph with non-zero priority. The frequency of priority levels is shown below.

```{r, echo=FALSE}
showFreqTable(entities$priority)
```

### @shortcut property

```{r, echo=FALSE}
with.shortcut <- subset(entities, nchar(as.character(shortcut)) > 0)
unique.shortcuts <- unique(with.shortcut$shortcut)
```

SmSn's `@shortcut` property is not commonly used, but it allows you to put certain entities on speed dial, so to speak. For example, if you often look up Wikipedia in the graph, you might assign it a shortcut of "wpd".
The current graph includes **`r num(length(unique.shortcuts))` unique shortcuts** annotating **`r num(nrow(with.shortcut))` entities** `r perc.of.entities(nrow(with.shortcut))`.

These shortcuts are: `r paste(sort(as.vector(unique.shortcuts)), sep=", ")`.
